{"remainingRequest":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js!/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maguodong/Documents/projects/luffycity/web im/src/components/group/member-profile-card.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/maguodong/Documents/projects/luffycity/web im/src/components/group/member-profile-card.vue","mtime":1576188392000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Divider2 from \"element-ui/lib/theme-chalk/divider.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Divider from \"element-ui/lib/divider\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getFullDate } from \"../../utils/date\"; // 群成员资料卡片组件，全局共用同一个组件。\n\nexport default {\n  name: 'MemberProfileCard',\n  components: {\n    ElDivider: _Divider\n  },\n  data: function data() {\n    return {\n      member: {},\n      x: 0,\n      // 显示的位置 x\n      y: 0,\n      // 显示的位置 y\n      visible: false\n    };\n  },\n  mounted: function mounted() {\n    // 通过事件总线，监听 showMemebrProfile 事件\n    this.$bus.$on('showMemberProfile', this.handleShowMemberProfile, this);\n  },\n  computed: {\n    joinTime: function joinTime() {\n      if (this.member.joinTime) {\n        return getFullDate(new Date(this.member.joinTime * 1000));\n      }\n\n      return '';\n    },\n    muteUntil: function muteUntil() {\n      if (this.member.muteUntil) {\n        return getFullDate(new Date(this.member.muteUntil * 1000));\n      }\n\n      return '';\n    }\n  },\n  methods: {\n    handleSendMessage: function handleSendMessage() {\n      this.$store.dispatch('checkoutConversation', \"C2C\".concat(this.member.userID));\n      this.hide();\n    },\n    handleShowMemberProfile: function handleShowMemberProfile(_ref) {\n      var event = _ref.event,\n          member = _ref.member;\n      // 可以拿到 meber 和 点击事件的 event 信息\n      this.member = member || {};\n      this.x = event.x;\n      this.y = event.y;\n      this.show();\n    },\n    show: function show() {\n      if (this.visible) {\n        return;\n      } // 显示时，监听全局点击事件，若点击区域不是当前组件，则隐藏\n\n\n      window.addEventListener('click', this.handleClick, this);\n      this.visible = true;\n    },\n    hide: function hide() {\n      if (!this.visible) {\n        return;\n      } // 隐藏时，注销监听\n\n\n      window.removeEventListener('click', this.handleClick, this);\n      this.visible = false;\n    },\n    handleClick: function handleClick(event) {\n      // 判断点击区域是否是当前组件，若不是，则隐藏组件\n      if (event.target !== this.$refs['member-profile-card']) {\n        this.hide();\n      }\n    }\n  }\n};",{"version":3,"sources":["member-profile-card.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,SAAA,WAAA,2B,CAEA;;AACA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,CAAA,EAAA,CAFA;AAEA;AACA,MAAA,CAAA,EAAA,CAHA;AAGA;AACA,MAAA,OAAA,EAAA;AAJA,KAAA;AAMA,GAZA;AAaA,EAAA,OAbA,qBAaA;AACA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,mBAAA,EAAA,KAAA,uBAAA,EAAA,IAAA;AACA,GAhBA;AAiBA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,UAAA,KAAA,MAAA,CAAA,QAAA,EAAA;AACA,eAAA,WAAA,CAAA,IAAA,IAAA,CAAA,KAAA,MAAA,CAAA,QAAA,GAAA,IAAA,CAAA,CAAA;AACA;;AACA,aAAA,EAAA;AACA,KANA;AAOA,IAAA,SAPA,uBAOA;AACA,UAAA,KAAA,MAAA,CAAA,SAAA,EAAA;AACA,eAAA,WAAA,CAAA,IAAA,IAAA,CAAA,KAAA,MAAA,CAAA,SAAA,GAAA,IAAA,CAAA,CAAA;AACA;;AACA,aAAA,EAAA;AACA;AAZA,GAjBA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,iBADA,+BACA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,sBAAA,eAAA,KAAA,MAAA,CAAA,MAAA;AACA,WAAA,IAAA;AACA,KAJA;AAKA,IAAA,uBALA,yCAKA;AAAA,UAAA,KAAA,QAAA,KAAA;AAAA,UAAA,MAAA,QAAA,MAAA;AACA;AACA,WAAA,MAAA,GAAA,MAAA,IAAA,EAAA;AACA,WAAA,CAAA,GAAA,KAAA,CAAA,CAAA;AACA,WAAA,CAAA,GAAA,KAAA,CAAA,CAAA;AACA,WAAA,IAAA;AACA,KAXA;AAYA,IAAA,IAZA,kBAYA;AACA,UAAA,KAAA,OAAA,EAAA;AACA;AACA,OAHA,CAIA;;;AACA,MAAA,MAAA,CAAA,gBAAA,CAAA,OAAA,EAAA,KAAA,WAAA,EAAA,IAAA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,KAnBA;AAoBA,IAAA,IApBA,kBAoBA;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA;AACA,OAHA,CAIA;;;AACA,MAAA,MAAA,CAAA,mBAAA,CAAA,OAAA,EAAA,KAAA,WAAA,EAAA,IAAA;AACA,WAAA,OAAA,GAAA,KAAA;AACA,KA3BA;AA4BA,IAAA,WA5BA,uBA4BA,KA5BA,EA4BA;AACA;AACA,UAAA,KAAA,CAAA,MAAA,KAAA,KAAA,KAAA,CAAA,qBAAA,CAAA,EAAA;AACA,aAAA,IAAA;AACA;AACA;AAjCA;AA/BA,CAAA","sourcesContent":["<template>\n  <transition name=\"el-fade-in\">\n    <div\n      class=\"member-profile-card-wrapper\"\n      ref=\"member-profile-card\"\n      v-show=\"visible\"\n      :style=\"{top: y + 'px', left: x + 'px'}\"\n    >\n      <div class=\"profile\">\n        <avatar :src=\"member.avatar\" class=\"avatar\" />\n        <div class=\"basic\">\n          <span>ID：{{member.userID}}</span>\n          <span>昵称：{{member.nick||\"暂无\"}}</span>\n        </div>\n      </div>\n      <el-divider class=\"divider\" />\n      <div class=\"member-profile\">\n        <div class=\"item\">\n          <span class=\"label\">群名片</span>\n          {{member.nameCard||\"暂无\"}}\n        </div>\n        <div class=\"item\">\n          <span class=\"label\">入群时间</span>\n          {{joinTime}}\n        </div>\n        <div v-if=\"member.muteUntil\" class=\"item\">\n          <span class=\"label\">禁言至</span>\n          {{muteUntil}}\n        </div>\n      </div>\n      <el-button\n        class=\"send-message-btn\"\n        type=\"primary\"\n        size=\"mini\"\n        title=\"发消息\"\n        @click=\"handleSendMessage\"\n        icon=\"el-icon-message\"\n        circle\n      ></el-button>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { Divider } from 'element-ui'\nimport { getFullDate } from '../../utils/date'\n\n// 群成员资料卡片组件，全局共用同一个组件。\nexport default {\n  name: 'MemberProfileCard',\n  components: {\n    ElDivider: Divider\n  },\n  data() {\n    return {\n      member: {},\n      x: 0, // 显示的位置 x\n      y: 0, // 显示的位置 y\n      visible: false\n    }\n  },\n  mounted() {\n    // 通过事件总线，监听 showMemebrProfile 事件\n    this.$bus.$on('showMemberProfile', this.handleShowMemberProfile, this)\n  },\n  computed: {\n    joinTime() {\n      if (this.member.joinTime) {\n        return getFullDate(new Date(this.member.joinTime * 1000))\n      }\n      return ''\n    },\n    muteUntil() {\n      if (this.member.muteUntil) {\n        return getFullDate(new Date(this.member.muteUntil * 1000))\n      }\n      return ''\n    }\n  },\n  methods: {\n    handleSendMessage() {\n      this.$store.dispatch('checkoutConversation', `C2C${this.member.userID}`)\n      this.hide()\n    },\n    handleShowMemberProfile({ event, member }) {\n      // 可以拿到 meber 和 点击事件的 event 信息\n      this.member = member || {}\n      this.x = event.x\n      this.y = event.y\n      this.show()\n    },\n    show() {\n      if (this.visible) {\n        return\n      }\n      // 显示时，监听全局点击事件，若点击区域不是当前组件，则隐藏\n      window.addEventListener('click', this.handleClick, this)\n      this.visible = true\n    },\n    hide() {\n      if (!this.visible) {\n        return\n      }\n      // 隐藏时，注销监听\n      window.removeEventListener('click', this.handleClick, this)\n      this.visible = false\n    },\n    handleClick(event) {\n      // 判断点击区域是否是当前组件，若不是，则隐藏组件\n      if (event.target !== this.$refs['member-profile-card']) {\n        this.hide()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.member-profile-card-wrapper {\n  max-width: 300px;\n  padding: 24px;\n  background: #fff;\n  border-radius: 5px;\n  position: fixed;\n  box-shadow: 0 0 10px gray;\n\n  .profile {\n    display: flex;\n\n    .avatar {\n      width: 60px;\n      height: 60px;\n      margin-right: 12px;\n    }\n\n    .basic {\n      display: flex;\n      align-items: flex-start;\n      flex-direction: column;\n    }\n  }\n\n  .divider {\n    margin: 12px 0;\n  }\n\n  .member-profile {\n    margin-bottom: 12px;\n\n    .item {\n      font-size: 15px;\n\n      .label {\n        display: inline-block;\n        width: 4em;\n        text-align: justify;\n        text-align-last: justify;\n        color: gray;\n      }\n    }\n  }\n  .send-message-btn {\n    float right\n  }\n}\n</style>"],"sourceRoot":"src/components/group"}]}