{"remainingRequest":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js!/Users/maguodong/Documents/projects/luffycity/web im/node_modules/eslint-loader/index.js??ref--13-0!/Users/maguodong/Documents/projects/luffycity/web im/src/utils/decodeText.js","dependencies":[{"path":"/Users/maguodong/Documents/projects/luffycity/web im/src/utils/decodeText.js","mtime":1576188392000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { emojiMap, emojiUrl } from \"./emojiMap\";\n/** 传入messageBody（群系统消息SystemMessage，群提示消息GroupTip除外）\n * payload = {\n *  msgType: 'TIMTextElem',\n *  msgContent: {\n *    text: 'AAA[龇牙]AAA[龇牙]AAA[龇牙AAA]'\n *  }\n *}\n **/\n\nexport function decodeText(payload) {\n  var renderDom = []; // 文本消息\n\n  var temp = payload.text;\n  var left = -1;\n  var right = -1;\n\n  while (temp !== '') {\n    left = temp.indexOf('[');\n    right = temp.indexOf(']');\n\n    switch (left) {\n      case 0:\n        if (right === -1) {\n          renderDom.push({\n            name: 'text',\n            text: temp\n          });\n          temp = '';\n        } else {\n          var _emoji = temp.slice(0, right + 1);\n\n          if (emojiMap[_emoji]) {\n            renderDom.push({\n              name: 'img',\n              src: emojiUrl + emojiMap[_emoji]\n            });\n            temp = temp.substring(right + 1);\n          } else {\n            renderDom.push({\n              name: 'text',\n              text: '['\n            });\n            temp = temp.slice(1);\n          }\n        }\n\n        break;\n\n      case -1:\n        renderDom.push({\n          name: 'text',\n          text: temp\n        });\n        temp = '';\n        break;\n\n      default:\n        renderDom.push({\n          name: 'text',\n          text: temp.slice(0, left)\n        });\n        temp = temp.substring(left);\n        break;\n    }\n  }\n\n  return renderDom;\n}",{"version":3,"sources":["/Users/maguodong/Documents/projects/luffycity/web im/src/utils/decodeText.js"],"names":["emojiMap","emojiUrl","decodeText","payload","renderDom","temp","text","left","right","indexOf","push","name","_emoji","slice","src","substring"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,QAAnB;AACA;;;;;;;;;AAQA,OAAO,SAASC,UAAT,CAAqBC,OAArB,EAA8B;AACnC,MAAIC,SAAS,GAAG,EAAhB,CADmC,CAEnC;;AACE,MAAIC,IAAI,GAAGF,OAAO,CAACG,IAAnB;AACA,MAAIC,IAAI,GAAG,CAAC,CAAZ;AACA,MAAIC,KAAK,GAAG,CAAC,CAAb;;AACA,SAAOH,IAAI,KAAK,EAAhB,EAAoB;AAClBE,IAAAA,IAAI,GAAGF,IAAI,CAACI,OAAL,CAAa,GAAb,CAAP;AACAD,IAAAA,KAAK,GAAGH,IAAI,CAACI,OAAL,CAAa,GAAb,CAAR;;AACA,YAAQF,IAAR;AACE,WAAK,CAAL;AACE,YAAIC,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBJ,UAAAA,SAAS,CAACM,IAAV,CAAe;AACbC,YAAAA,IAAI,EAAE,MADO;AAEbL,YAAAA,IAAI,EAAED;AAFO,WAAf;AAIAA,UAAAA,IAAI,GAAG,EAAP;AACD,SAND,MAMO;AACL,cAAIO,MAAM,GAAGP,IAAI,CAACQ,KAAL,CAAW,CAAX,EAAcL,KAAK,GAAG,CAAtB,CAAb;;AACA,cAAIR,QAAQ,CAACY,MAAD,CAAZ,EAAsB;AACpBR,YAAAA,SAAS,CAACM,IAAV,CAAe;AACbC,cAAAA,IAAI,EAAE,KADO;AAEbG,cAAAA,GAAG,EAAEb,QAAQ,GAAGD,QAAQ,CAACY,MAAD;AAFX,aAAf;AAIAP,YAAAA,IAAI,GAAGA,IAAI,CAACU,SAAL,CAAeP,KAAK,GAAG,CAAvB,CAAP;AACD,WAND,MAMO;AACLJ,YAAAA,SAAS,CAACM,IAAV,CAAe;AACbC,cAAAA,IAAI,EAAE,MADO;AAEbL,cAAAA,IAAI,EAAE;AAFO,aAAf;AAIAD,YAAAA,IAAI,GAAGA,IAAI,CAACQ,KAAL,CAAW,CAAX,CAAP;AACD;AACF;;AACD;;AACF,WAAK,CAAC,CAAN;AACET,QAAAA,SAAS,CAACM,IAAV,CAAe;AACbC,UAAAA,IAAI,EAAE,MADO;AAEbL,UAAAA,IAAI,EAAED;AAFO,SAAf;AAIAA,QAAAA,IAAI,GAAG,EAAP;AACA;;AACF;AACED,QAAAA,SAAS,CAACM,IAAV,CAAe;AACbC,UAAAA,IAAI,EAAE,MADO;AAEbL,UAAAA,IAAI,EAAED,IAAI,CAACQ,KAAL,CAAW,CAAX,EAAcN,IAAd;AAFO,SAAf;AAIAF,QAAAA,IAAI,GAAGA,IAAI,CAACU,SAAL,CAAeR,IAAf,CAAP;AACA;AAtCJ;AAwCD;;AACH,SAAOH,SAAP;AACD","sourcesContent":["import { emojiMap, emojiUrl } from './emojiMap'\n/** 传入messageBody（群系统消息SystemMessage，群提示消息GroupTip除外）\n * payload = {\n *  msgType: 'TIMTextElem',\n *  msgContent: {\n *    text: 'AAA[龇牙]AAA[龇牙]AAA[龇牙AAA]'\n *  }\n *}\n **/\nexport function decodeText (payload) {\n  let renderDom = []\n  // 文本消息\n    let temp = payload.text\n    let left = -1\n    let right = -1\n    while (temp !== '') {\n      left = temp.indexOf('[')\n      right = temp.indexOf(']')\n      switch (left) {\n        case 0:\n          if (right === -1) {\n            renderDom.push({\n              name: 'text',\n              text: temp\n            })\n            temp = ''\n          } else {\n            let _emoji = temp.slice(0, right + 1)\n            if (emojiMap[_emoji]) {\n              renderDom.push({\n                name: 'img',\n                src: emojiUrl + emojiMap[_emoji]\n              })\n              temp = temp.substring(right + 1)\n            } else {\n              renderDom.push({\n                name: 'text',\n                text: '['\n              })\n              temp = temp.slice(1)\n            }\n          }\n          break\n        case -1:\n          renderDom.push({\n            name: 'text',\n            text: temp\n          })\n          temp = ''\n          break\n        default:\n          renderDom.push({\n            name: 'text',\n            text: temp.slice(0, left)\n          })\n          temp = temp.substring(left)\n          break\n      }\n    }\n  return renderDom\n}\n"]}]}