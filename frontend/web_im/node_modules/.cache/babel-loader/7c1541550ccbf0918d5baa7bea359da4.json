{"remainingRequest":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js!/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maguodong/Documents/projects/luffycity/web im/src/components/conversation/conversationProfile/user-profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/maguodong/Documents/projects/luffycity/web im/src/components/conversation/conversationProfile/user-profile.vue","mtime":1576188392000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.find-index\";\nimport _defineProperty from \"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nexport default {\n  props: {\n    userProfile: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: _objectSpread({}, mapState({\n    blacklist: function blacklist(state) {\n      return state.blacklist.blacklist;\n    },\n    myUserID: function myUserID(state) {\n      return state.user.currentUserProfile.userID;\n    }\n  }), {\n    isInBlacklist: function isInBlacklist() {\n      var _this = this;\n\n      return this.blacklist.findIndex(function (item) {\n        return item.userID === _this.userProfile.userID;\n      }) >= 0;\n    },\n    gender: function gender() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return '男';\n\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return '女';\n\n        default:\n          return '未设置';\n      }\n    },\n    genderClass: function genderClass() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return 'icon-male';\n\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return 'icon-female';\n\n        default:\n          return '';\n      }\n    }\n  }),\n  methods: {\n    addToBlackList: function addToBlackList() {\n      var _this2 = this;\n\n      this.tim.addToBlacklist({\n        userIDList: [this.userProfile.userID]\n      }).then(function () {\n        _this2.$store.dispatch('getBlacklist');\n      }).catch(function (imError) {\n        _this2.$store.commit('showMessage', {\n          message: imError.message,\n          type: 'error'\n        });\n      });\n    },\n    removeFromBlacklist: function removeFromBlacklist() {\n      var _this3 = this;\n\n      this.tim.removeFromBlacklist({\n        userIDList: [this.userProfile.userID]\n      }).then(function () {\n        _this3.$store.commit('removeFromBlacklist', _this3.userProfile.userID);\n      }).catch(function (error) {\n        _this3.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["user-profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,SAAA,QAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,QAAA,oBACA,QAAA,CAAA;AACA,IAAA,SAAA,EAAA,mBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,SAAA,CAAA,SAAA;AAAA,KADA;AAEA,IAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,kBAAA,CAAA,MAAA;AAAA;AAFA,GAAA,CADA;AAKA,IAAA,aALA,2BAKA;AAAA;;AACA,aAAA,KAAA,SAAA,CAAA,SAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,MAAA,KAAA,KAAA,CAAA,WAAA,CAAA,MAAA;AAAA,OAAA,KAAA,CAAA;AACA,KAPA;AAQA,IAAA,MARA,oBAQA;AACA,cAAA,KAAA,WAAA,CAAA,MAAA;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,CAAA,WAAA;AACA,iBAAA,GAAA;;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,CAAA,aAAA;AACA,iBAAA,GAAA;;AACA;AACA,iBAAA,KAAA;AANA;AAQA,KAjBA;AAkBA,IAAA,WAlBA,yBAkBA;AACA,cAAA,KAAA,WAAA,CAAA,MAAA;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,CAAA,WAAA;AACA,iBAAA,WAAA;;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,CAAA,aAAA;AACA,iBAAA,aAAA;;AACA;AACA,iBAAA,EAAA;AANA;AAQA;AA3BA,IAPA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AACA,WAAA,GAAA,CACA,cADA,CACA;AAAA,QAAA,UAAA,EAAA,CAAA,KAAA,WAAA,CAAA,MAAA;AAAA,OADA,EAEA,IAFA,CAEA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,cAAA;AACA,OAJA,EAKA,KALA,CAKA,UAAA,OAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA;AACA,UAAA,OAAA,EAAA,OAAA,CAAA,OADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,OAVA;AAWA,KAbA;AAcA,IAAA,mBAdA,iCAcA;AAAA;;AACA,WAAA,GAAA,CAAA,mBAAA,CAAA;AAAA,QAAA,UAAA,EAAA,CAAA,KAAA,WAAA,CAAA,MAAA;AAAA,OAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,MAAA,CAAA,WAAA,CAAA,MAAA;AACA,OAFA,EAGA,KAHA,CAGA,UAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA;AACA,UAAA,IAAA,EAAA,OADA;AAEA,UAAA,OAAA,EAAA,KAAA,CAAA;AAFA,SAAA;AAIA,OARA;AASA;AAxBA;AApCA,CAAA","sourcesContent":["<template>\n  <div class=\"profile-user\">\n    <avatar :title=userProfile.userID :src=\"userProfile.avatar\" />\n    <div class=\"nick-name text-ellipsis\">\n      <span v-if=\"userProfile.nick\" :title=userProfile.nick>\n        {{ userProfile.nick }}\n      </span>\n      <span v-else class=\"anonymous\" title=\"该用户未设置昵称\">\n        [Anonymous]\n      </span>\n    </div>\n    <div class=\"gender\" v-if=\"genderClass\">\n      <span :title=\"gender\" class=\"iconfont\" :class=\"genderClass\"></span>\n    </div>\n    <el-button\n      title=\"将该用户加入黑名单\"\n      type=\"text\"\n      @click=\"addToBlackList\"\n      v-if=\"!isInBlacklist && userProfile.userID !== myUserID\"\n      class=\"btn-add-blacklist\"\n      >加入黑名单</el-button\n    >\n    <el-button title=\"将该用户移出黑名单\" type=\"text\" @click=\"removeFromBlacklist\" v-else-if=\"isInBlacklist\">移出黑名单</el-button>\n    <!-- 拉黑 和 反拉黑 -->\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  props: {\n    userProfile: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: {\n    ...mapState({\n      blacklist: state => state.blacklist.blacklist,\n      myUserID: state => state.user.currentUserProfile.userID\n    }),\n    isInBlacklist() {\n      return this.blacklist.findIndex(item => item.userID === this.userProfile.userID) >= 0\n    },\n    gender() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return '男'\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return '女'\n        default:\n          return '未设置'\n      }\n    },\n    genderClass() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return 'icon-male'\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return 'icon-female'\n        default:\n          return ''\n      }\n    }\n  },\n  methods: {\n    addToBlackList() {\n      this.tim\n        .addToBlacklist({ userIDList: [this.userProfile.userID] })\n        .then(() => {\n          this.$store.dispatch('getBlacklist')\n        })\n        .catch(imError => {\n          this.$store.commit('showMessage', {\n            message: imError.message,\n            type: 'error'\n          })\n        })\n    },\n    removeFromBlacklist() {\n      this.tim.removeFromBlacklist({ userIDList: [this.userProfile.userID] }).then(() => {\n        this.$store.commit('removeFromBlacklist', this.userProfile.userID)\n      })\n      .catch(error => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.profile-user\n  width 100%\n  text-align center\n  padding 0 20px\n  .avatar\n    width 160px\n    height 160px\n    border-radius 50%\n    margin 30px auto\n  .nick-name\n    width 100%\n    color $base\n    font-size 20px\n    font-weight bold\n    text-shadow $font-dark 0 0 0.1em\n    .anonymous\n      color $first\n      text-shadow none\n  .gender\n    padding 5px 0 10px 0\n    border-bottom 1px solid $border-base\n  .btn-add-blacklist\n    color $danger\n</style>\n"],"sourceRoot":"src/components/conversation/conversationProfile"}]}