{"remainingRequest":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js!/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maguodong/Documents/projects/luffycity/web im/src/components/group/group-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/maguodong/Documents/projects/luffycity/web im/src/components/group/group-list.vue","mtime":1576188392000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Autocomplete2 from \"element-ui/lib/theme-chalk/autocomplete.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Autocomplete from \"element-ui/lib/autocomplete\";\nimport _Dialog2 from \"element-ui/lib/theme-chalk/dialog.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Dialog from \"element-ui/lib/dialog\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport CreateGroup from \"./create-group.vue\";\nimport GroupItem from \"./group-item.vue\";\nexport default {\n  data: function data() {\n    return {\n      groupID: '',\n      hideSearchLoading: true\n    };\n  },\n  components: {\n    GroupItem: GroupItem,\n    ElDialog: _Dialog,\n    CreateGroup: CreateGroup,\n    ElAutocomplete: _Autocomplete\n  },\n  computed: _objectSpread({\n    groupList: function groupList() {\n      return this.$store.state.group.groupList;\n    }\n  }, mapState({\n    createGroupModelVisible: function createGroupModelVisible(state) {\n      return state.group.createGroupModelVisible;\n    }\n  })),\n  methods: {\n    onGroupUpdated: function onGroupUpdated(groupList) {\n      this.$store.dispatch('updateGroupList', groupList);\n    },\n    createGroup: function createGroup() {},\n    closeCreateGroupModel: function closeCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', false);\n    },\n    searchGroupByID: function searchGroupByID(queryString, showInSearchResult) {\n      var _this = this;\n\n      if (queryString.trim().length > 0) {\n        this.hideSearchLoading = false;\n        this.tim.searchGroupByID(queryString).then(function (_ref) {\n          var group = _ref.data.group;\n          showInSearchResult([group]);\n        }).catch(function () {\n          _this.$store.commit('showMessage', {\n            message: '没有找到该群',\n            type: 'error'\n          });\n        });\n      } else {\n        this.hideSearchLoading = true;\n      }\n    },\n    showCreateGroupModel: function showCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', true);\n    },\n    applyJoinGroup: function applyJoinGroup(group) {\n      var _this2 = this;\n\n      this.tim.joinGroup({\n        groupID: group.groupID\n      }).then(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee(res) {\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.t0 = res.data.status;\n                  _context.next = _context.t0 === _this2.TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL ? 3 : _context.t0 === _this2.TIM.TYPES.JOIN_STATUS_SUCCESS ? 5 : _context.t0 === _this2.TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP ? 9 : 11;\n                  break;\n\n                case 3:\n                  _this2.$store.commit('showMessage', {\n                    message: '申请成功，等待群管理员确认。',\n                    type: 'info'\n                  });\n\n                  return _context.abrupt(\"break\", 12);\n\n                case 5:\n                  _context.next = 7;\n                  return _this2.$store.dispatch('checkoutConversation', \"GROUP\".concat(res.data.group.groupID));\n\n                case 7:\n                  _this2.$store.commit('showMessage', {\n                    message: '加群成功',\n                    type: 'success'\n                  });\n\n                  return _context.abrupt(\"break\", 12);\n\n                case 9:\n                  _this2.$store.commit('showMessage', {\n                    message: '您已经是群成员了，请勿重复加群哦！',\n                    type: 'info'\n                  });\n\n                  return _context.abrupt(\"break\", 12);\n\n                case 11:\n                  return _context.abrupt(\"break\", 12);\n\n                case 12:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }()).catch(function (error) {\n        _this2.$store.commit('showMessage', {\n          message: error.message,\n          type: 'error'\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["group-list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"list-container\">\n    <div class=\"header-bar\">\n      <el-autocomplete\n        :value-key=\"'groupID'\"\n        :debounce=\"500\"\n        size=\"mini\"\n        v-model=\"groupID\"\n        placeholder=\"输入群ID搜索\"\n        :fetch-suggestions=\"searchGroupByID\"\n        class=\"group-seach-bar\"\n        prefix-icon=\"el-icon-search\"\n        :hide-loading=\"hideSearchLoading\"\n        @input=\"hideSearchLoading = false\"\n        @select=\"applyJoinGroup\"\n      ></el-autocomplete>\n      <button title=\"创建群组\" @click=\"showCreateGroupModel\">\n        <i class=\"tim-icon-add\"></i>\n      </button>\n    </div>\n    <div class=\"group-container\">\n      <group-item v-for=\"group in groupList\" :key=\"group.groupID\" :group=\"group\" />\n      <el-dialog title=\"创建群组\" :visible=\"createGroupModelVisible\" @close=\"closeCreateGroupModel\" width=\"30%\">\n        <create-group></create-group>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { Dialog, Autocomplete } from 'element-ui'\nimport CreateGroup from './create-group.vue'\nimport GroupItem from './group-item.vue'\nexport default {\n  data() {\n    return {\n      groupID: '',\n      hideSearchLoading: true\n    }\n  },\n  components: {\n    GroupItem,\n    ElDialog: Dialog,\n    CreateGroup,\n    ElAutocomplete: Autocomplete\n  },\n  computed: {\n    groupList: function() {\n      return this.$store.state.group.groupList\n    },\n    ...mapState({\n      createGroupModelVisible: state => {\n        return state.group.createGroupModelVisible\n      }\n    })\n  },\n  methods: {\n    onGroupUpdated(groupList) {\n      this.$store.dispatch('updateGroupList', groupList)\n    },\n    createGroup() {},\n    closeCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', false)\n    },\n    searchGroupByID(queryString, showInSearchResult) {\n      if (queryString.trim().length > 0) {\n        this.hideSearchLoading = false\n        this.tim\n          .searchGroupByID(queryString)\n          .then(({ data: { group } }) => {\n            showInSearchResult([group])\n          })\n          .catch(() => {\n            this.$store.commit('showMessage', {\n              message: '没有找到该群',\n              type: 'error'\n            })\n          })\n      } else {\n        this.hideSearchLoading = true\n      }\n    },\n    showCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', true)\n    },\n    applyJoinGroup(group) {\n      this.tim\n        .joinGroup({ groupID: group.groupID })\n        .then(async res => {\n          switch(res.data.status) {\n            case this.TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL:\n              this.$store.commit('showMessage', {\n                message: '申请成功，等待群管理员确认。',\n                type: 'info'\n              })\n              break\n            case this.TIM.TYPES.JOIN_STATUS_SUCCESS:\n              await this.$store.dispatch(\n                'checkoutConversation',\n                `GROUP${res.data.group.groupID}`\n              )\n              this.$store.commit('showMessage', {\n                message: '加群成功',\n                type: 'success'\n              })\n              break\n            case this.TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP:\n              this.$store.commit('showMessage', {\n                message: '您已经是群成员了，请勿重复加群哦！',\n                type: 'info'\n              })\n              break\n            default: break\n          }\n        })\n        .catch(error => {\n          this.$store.commit('showMessage', {\n            message: error.message,\n            type: 'error'\n          })\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.list-container\n  height 100%\n  width 100%\n  display flex\n  flex-direction column\n  .group-container \n    overflow-y scroll\n  .header-bar\n    display: flex;\n    flex-shrink 0\n    height 50px\n    border-bottom 1px solid $background-deep-dark\n    padding 10px 10px 10px 20px\n    .group-seach-bar\n      width 100%\n      margin-right 10px\n      >>> .el-input\n        input\n          color $first\n          border none\n          border-radius 30px\n          background-color $deep-background !important\n          &::placeholder\n            color $font-dark\n        .el-icon-search\n          color $font-dark\n    button\n      float right\n      display: inline-block;\n      cursor: pointer;\n      background $background-deep-dark\n      border: none\n      color: $font-dark;\n      box-sizing: border-box;\n      transition: .3s;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n      margin: 0\n      padding 0\n      width 30px\n      height 30px\n      line-height 34px\n      font-size: 24px;\n      text-align: center;\n      white-space: nowrap;\n      border-radius: 50%\n      outline 0\n      flex-shrink 0\n      &:hover\n        transform: rotate(360deg);\n        color $light-primary\n  .scroll-container\n    overflow-y scroll\n    flex 1\n\n</style>\n"],"sourceRoot":"src/components/group"}]}