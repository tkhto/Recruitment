{"remainingRequest":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maguodong/Documents/projects/luffycity/web im/src/components/message/message-elements/group-system-notice-element.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/maguodong/Documents/projects/luffycity/web im/src/components/message/message-elements/group-system-notice-element.vue","mtime":1576188392000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Dialog, Form, FormItem, RadioGroup, Radio } from 'element-ui'\nimport MessageBubble from '../message-bubble'\nimport { translateGroupSystemNotice } from '../../../utils/common'\n\nexport default {\n  name: 'GroupSystemNoticeElement',\n  props: {\n    payload: {\n      type: Object,\n      required: true\n    },\n    message: {\n      type: Object,\n      required: false\n    }\n  },\n  components: {\n    ElDialog: Dialog,\n    ElForm: Form,\n    ElFormItem: FormItem,\n    ElRadioGroup: RadioGroup,\n    ElRadio: Radio,\n    MessageBubble\n  },\n  data() {\n    return {\n      showDialog: false,\n      form: {\n        handleAction: 'Agree',\n        handleMessage: ''\n      }\n    }\n  },\n  computed: {\n    text() {\n      return translateGroupSystemNotice(this.message)\n    },\n    title() {\n      if (this.message.type === this.TIM.TYPES.MSG_GRP_SYS_NOTICE) {\n        return '群系统通知'\n      }\n      return '系统通知'\n    },\n    isJoinGroupRequest() {\n      return this.payload.operationType === 1\n    }\n  },\n  methods: {\n    handleGroupApplication() {\n      this.tim\n        .handleGroupApplication({\n          handleAction: this.form.handleAction,\n          handleMessage: this.form.handleMessage,\n          message: this.message\n        })\n        .then(() => {\n          this.showDialog = false\n          this.$store.commit('removeMessage', this.message)\n        })\n        .catch(error => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n          this.showDialog = false\n        })\n    }\n  }\n}\n",{"version":3,"sources":["group-system-notice-element.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"group-system-notice-element.vue","sourceRoot":"src/components/message/message-elements","sourcesContent":["<template>\n  <message-bubble :isMine=\"false\">\n    <div class=\"group-system-element-wrapper\">\n      {{ text }}\n      <el-button v-if=\"isJoinGroupRequest\" type=\"text\" @click=\"showDialog = true\">处理</el-button>\n      <el-dialog title=\"处理加群申请\" :visible.sync=\"showDialog\" width=\"30%\">\n        <el-form ref=\"form\" v-model=\"form\" label-width=\"100px\">\n          <el-form-item label=\"处理结果：\">\n            <el-radio-group v-model=\"form.handleAction\">\n              <el-radio label=\"Agree\">同意</el-radio>\n              <el-radio label=\"Reject\">拒绝</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"附言：\">\n            <el-input\n              type=\"textarea\"\n              resize=\"none\"\n              :rows=\"3\"\n              placeholder=\"请输入附言\"\n              v-model=\"form.handleMessage\"\n            />\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"showDialog = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"handleGroupApplication\">确 定</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  </message-bubble>\n</template>\n\n<script>\nimport { Dialog, Form, FormItem, RadioGroup, Radio } from 'element-ui'\nimport MessageBubble from '../message-bubble'\nimport { translateGroupSystemNotice } from '../../../utils/common'\n\nexport default {\n  name: 'GroupSystemNoticeElement',\n  props: {\n    payload: {\n      type: Object,\n      required: true\n    },\n    message: {\n      type: Object,\n      required: false\n    }\n  },\n  components: {\n    ElDialog: Dialog,\n    ElForm: Form,\n    ElFormItem: FormItem,\n    ElRadioGroup: RadioGroup,\n    ElRadio: Radio,\n    MessageBubble\n  },\n  data() {\n    return {\n      showDialog: false,\n      form: {\n        handleAction: 'Agree',\n        handleMessage: ''\n      }\n    }\n  },\n  computed: {\n    text() {\n      return translateGroupSystemNotice(this.message)\n    },\n    title() {\n      if (this.message.type === this.TIM.TYPES.MSG_GRP_SYS_NOTICE) {\n        return '群系统通知'\n      }\n      return '系统通知'\n    },\n    isJoinGroupRequest() {\n      return this.payload.operationType === 1\n    }\n  },\n  methods: {\n    handleGroupApplication() {\n      this.tim\n        .handleGroupApplication({\n          handleAction: this.form.handleAction,\n          handleMessage: this.form.handleMessage,\n          message: this.message\n        })\n        .then(() => {\n          this.showDialog = false\n          this.$store.commit('removeMessage', this.message)\n        })\n        .catch(error => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n          this.showDialog = false\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.card {\n  background: #fff;\n  padding: 12px;\n  border-radius: 5px;\n  width: 300px;\n\n  .card-header {\n    font-size: 18px;\n  }\n\n  .card-content {\n    font-size: 14px;\n  }\n}\n</style>\n"]}]}