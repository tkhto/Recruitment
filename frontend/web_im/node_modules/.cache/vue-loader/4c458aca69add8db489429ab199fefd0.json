{"remainingRequest":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maguodong/Documents/projects/luffycity/web im/src/components/group/group-list.vue?vue&type=style&index=0&id=bf2d6268&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/maguodong/Documents/projects/luffycity/web im/src/components/group/group-list.vue","mtime":1576188392000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maguodong/Documents/projects/luffycity/web im/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.list-container\n  height 100%\n  width 100%\n  display flex\n  flex-direction column\n  .group-container \n    overflow-y scroll\n  .header-bar\n    display: flex;\n    flex-shrink 0\n    height 50px\n    border-bottom 1px solid $background-deep-dark\n    padding 10px 10px 10px 20px\n    .group-seach-bar\n      width 100%\n      margin-right 10px\n      >>> .el-input\n        input\n          color $first\n          border none\n          border-radius 30px\n          background-color $deep-background !important\n          &::placeholder\n            color $font-dark\n        .el-icon-search\n          color $font-dark\n    button\n      float right\n      display: inline-block;\n      cursor: pointer;\n      background $background-deep-dark\n      border: none\n      color: $font-dark;\n      box-sizing: border-box;\n      transition: .3s;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n      margin: 0\n      padding 0\n      width 30px\n      height 30px\n      line-height 34px\n      font-size: 24px;\n      text-align: center;\n      white-space: nowrap;\n      border-radius: 50%\n      outline 0\n      flex-shrink 0\n      &:hover\n        transform: rotate(360deg);\n        color $light-primary\n  .scroll-container\n    overflow-y scroll\n    flex 1\n\n",{"version":3,"sources":["group-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"group-list.vue","sourceRoot":"src/components/group","sourcesContent":["<template>\n  <div class=\"list-container\">\n    <div class=\"header-bar\">\n      <el-autocomplete\n        :value-key=\"'groupID'\"\n        :debounce=\"500\"\n        size=\"mini\"\n        v-model=\"groupID\"\n        placeholder=\"输入群ID搜索\"\n        :fetch-suggestions=\"searchGroupByID\"\n        class=\"group-seach-bar\"\n        prefix-icon=\"el-icon-search\"\n        :hide-loading=\"hideSearchLoading\"\n        @input=\"hideSearchLoading = false\"\n        @select=\"applyJoinGroup\"\n      ></el-autocomplete>\n      <button title=\"创建群组\" @click=\"showCreateGroupModel\">\n        <i class=\"tim-icon-add\"></i>\n      </button>\n    </div>\n    <div class=\"group-container\">\n      <group-item v-for=\"group in groupList\" :key=\"group.groupID\" :group=\"group\" />\n      <el-dialog title=\"创建群组\" :visible=\"createGroupModelVisible\" @close=\"closeCreateGroupModel\" width=\"30%\">\n        <create-group></create-group>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { Dialog, Autocomplete } from 'element-ui'\nimport CreateGroup from './create-group.vue'\nimport GroupItem from './group-item.vue'\nexport default {\n  data() {\n    return {\n      groupID: '',\n      hideSearchLoading: true\n    }\n  },\n  components: {\n    GroupItem,\n    ElDialog: Dialog,\n    CreateGroup,\n    ElAutocomplete: Autocomplete\n  },\n  computed: {\n    groupList: function() {\n      return this.$store.state.group.groupList\n    },\n    ...mapState({\n      createGroupModelVisible: state => {\n        return state.group.createGroupModelVisible\n      }\n    })\n  },\n  methods: {\n    onGroupUpdated(groupList) {\n      this.$store.dispatch('updateGroupList', groupList)\n    },\n    createGroup() {},\n    closeCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', false)\n    },\n    searchGroupByID(queryString, showInSearchResult) {\n      if (queryString.trim().length > 0) {\n        this.hideSearchLoading = false\n        this.tim\n          .searchGroupByID(queryString)\n          .then(({ data: { group } }) => {\n            showInSearchResult([group])\n          })\n          .catch(() => {\n            this.$store.commit('showMessage', {\n              message: '没有找到该群',\n              type: 'error'\n            })\n          })\n      } else {\n        this.hideSearchLoading = true\n      }\n    },\n    showCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', true)\n    },\n    applyJoinGroup(group) {\n      this.tim\n        .joinGroup({ groupID: group.groupID })\n        .then(async res => {\n          switch(res.data.status) {\n            case this.TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL:\n              this.$store.commit('showMessage', {\n                message: '申请成功，等待群管理员确认。',\n                type: 'info'\n              })\n              break\n            case this.TIM.TYPES.JOIN_STATUS_SUCCESS:\n              await this.$store.dispatch(\n                'checkoutConversation',\n                `GROUP${res.data.group.groupID}`\n              )\n              this.$store.commit('showMessage', {\n                message: '加群成功',\n                type: 'success'\n              })\n              break\n            case this.TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP:\n              this.$store.commit('showMessage', {\n                message: '您已经是群成员了，请勿重复加群哦！',\n                type: 'info'\n              })\n              break\n            default: break\n          }\n        })\n        .catch(error => {\n          this.$store.commit('showMessage', {\n            message: error.message,\n            type: 'error'\n          })\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.list-container\n  height 100%\n  width 100%\n  display flex\n  flex-direction column\n  .group-container \n    overflow-y scroll\n  .header-bar\n    display: flex;\n    flex-shrink 0\n    height 50px\n    border-bottom 1px solid $background-deep-dark\n    padding 10px 10px 10px 20px\n    .group-seach-bar\n      width 100%\n      margin-right 10px\n      >>> .el-input\n        input\n          color $first\n          border none\n          border-radius 30px\n          background-color $deep-background !important\n          &::placeholder\n            color $font-dark\n        .el-icon-search\n          color $font-dark\n    button\n      float right\n      display: inline-block;\n      cursor: pointer;\n      background $background-deep-dark\n      border: none\n      color: $font-dark;\n      box-sizing: border-box;\n      transition: .3s;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n      margin: 0\n      padding 0\n      width 30px\n      height 30px\n      line-height 34px\n      font-size: 24px;\n      text-align: center;\n      white-space: nowrap;\n      border-radius: 50%\n      outline 0\n      flex-shrink 0\n      &:hover\n        transform: rotate(360deg);\n        color $light-primary\n  .scroll-container\n    overflow-y scroll\n    flex 1\n\n</style>\n"]}]}